<div class="container mx-auto p-8">
    <h2 class="text-4xl font-bold text-center mb-8 text-gray-800">Modifier la Section</h2>

    <!-- TinyMCE -->
    <script src="https://cdn.tiny.cloud/1/<%= tinymceApiKey %>/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
      tinymce.init({
        selector: '#content',
        plugins: 'autolink lists link image charmap print preview hr anchor pagebreak',
        toolbar_mode: 'floating',
        height: 500,
        menubar: false,
        toolbar: 'undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | link image',
        content_style: 'body { font-family:Helvetica,Arial,sans-serif; font-size:14px }'
      });
    </script>

    <form id="section-form" action="<%= adminPath %>/sections/edit/<%= section._id %>?_method=PUT" method="POST" class="max-w-4xl mx-auto bg-white p-8 rounded-xl shadow-sm border border-gray-100">
        <input type="hidden" name="_csrf" value="<%- csrfToken %>">
        <div class="mb-6">
            <label for="title" class="block text-gray-700 font-bold mb-2">Titre</label>
            <input type="text" id="title" name="title" value="<%= section.title %>" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
        <div class="mb-6">
            <label for="content" class="block text-gray-700 font-bold mb-2">Contenu</label>
            <textarea id="content" name="content" rows="20" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"><%= section.content %></textarea>
        </div>
        <div class="mb-6">
            <label for="page" class="block text-gray-700 font-bold mb-2">Page</label>
            <select id="page" name="page" required class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="home" <%= section.page === 'home' ? 'selected' : '' %>>Accueil</option>
                <option value="team" <%= section.page === 'team' ? 'selected' : '' %>>Équipe</option>
                <option value="events" <%= section.page === 'events' ? 'selected' : '' %>>Événements</option>
            </select>
        </div>
        <div class="text-center">
            <button type="submit" class="text-white font-bold py-3 px-8 rounded-full transition duration-300 bg-gradient-to-r from-blue-500 to-purple-600 hover:opacity-90 transform hover:scale-105">Mettre à Jour la Section</button>
        </div>
    </form>
</div>

<script>
  document.getElementById('section-form').addEventListener('submit', function(e) {
    tinymce.triggerSave();
  });
</script>
